class class_Gauge extends HTMLElement{connectedCallback(){var t='\n\t\t\t\t<style>\n\t\t\t\t\t#jsc_id {\n\t\t\t\t\t\tfont-size: var(--h4-text-size);\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\tmargin: var(--control-margin);\n\t\t\t\t\t}\n\t\t\t\t</style>\n                                <canvas id="jsc_id" ></canvas>\n\t\t\t\t\n\t\t\t\n\t\t\t';this.jsc_id=jsc_AddObject(),t=t.replace(/jsc_id/g,this.jsc_id);var e="document.getElementById('"+this.getAttribute("id")+"')";t=t.replace(/jsc_parent/g,e),this.myCurrentValue=0,this.hasAttribute("value")&&(this.myCurrentValue=this.getAttribute("value")),this.myUpdateMS=1e3,this.hasAttribute("updatems")&&(this.myUpdateMS=this.getAttribute("updatems")),this.myName="",this.hasAttribute("name")&&(this.myName=this.getAttribute("name")),this.myBackColor="white",this.hasAttribute("backcolor")&&(this.myBackColor=this.getAttribute("backcolor")),this.myWidth=200,this.hasAttribute("width")&&(this.myWidth=this.getAttribute("width")),this.myHeight=this.myWidth,this.hasAttribute("height")&&(this.myHeight=this.getAttribute("height")),this.myWatch="",this.hasAttribute("watch")&&(this.myWatch=this.getAttribute("watch")),this.myMin=0,this.hasAttribute("min")&&(this.myMin=this.getAttribute("min")),this.myMax=255,this.hasAttribute("max")&&(this.myMax=this.getAttribute("max")),this.myGuage_Range=this.myMax-this.myMin,this.myLowZoneEnd=this.myMin,this.hasAttribute("lowzoneend")&&(this.myLowZoneEnd=this.getAttribute("lowzoneend")),this.myLowZoneColor="orange",this.hasAttribute("lowzonecolor")&&(this.myLowZoneColor=this.getAttribute("lowzonecolor")),this.myHighZoneStart=this.myMax,this.hasAttribute("highzonestart")&&(this.myHighZoneStart=this.getAttribute("highzonestart")),this.myHighZoneColor="red",this.hasAttribute("highzonecolor")&&(this.myHighZoneColor=this.getAttribute("highzonecolor")),this.myNormalColor="green",this.hasAttribute("normalcolor")&&(this.myNormalColor=this.getAttribute("normalcolor")),this.LowRange_ArcEnd=this.myLowZoneEnd/this.myGuage_Range*180,this.HighRange_ArcStart=this.myHighZoneStart/this.myGuage_Range*180,this.innerHTML=t,this.drawGuage(),setInterval(function(){this.drawGuage()}.bind(this),1e3)}SetInternvalCallback(t){document.getElementById(t).setAttribute("value",window[this.getAttribute("watch")])}gauge_degreesToRadians(t){return t*(Math.PI/180)}gauge_radiansToDegrees(t){return t*(180/Math.PI)}gauge_drawPieSlice(t,e,i,h,s,a,r){t.fillStyle=r,t.beginPath(),t.moveTo(e,i),t.arc(e,i,h,this.gauge_degreesToRadians(s),this.gauge_degreesToRadians(a)),t.closePath(),t.fill()}drawGuage(){var t=document.getElementById(this.jsc_id),e=t.getContext("2d");e.canvas.width=this.myWidth,e.canvas.height=this.myHeight;var i=t.width/2,h=10+t.height/2,s=t.height/2-10;e.fillStyle=this.myBackColor,e.fillRect(0,0,t.width,t.height),this.gauge_drawPieSlice(e,i,h,s,180,360,this.myNormalColor),this.gauge_drawPieSlice(e,i,h,s,180,180+this.LowRange_ArcEnd,this.myLowZoneColor),this.gauge_drawPieSlice(e,i,h,s,180+this.HighRange_ArcStart,360,this.myHighZoneColor),e.beginPath(),e.moveTo(i,h),e.arc(i,h,.8*s,1*Math.PI,2*Math.PI,!1),e.fillStyle=this.myBackColor,e.closePath(),e.fill(),e.fillStyle="black",e.font="14px Arial";var a=e.measureText(this.myMin+" ").width;e.fillText(this.myMin,s*(1-.8)+a+10,h),e.fillStyle="black",e.font="14px Arial",a=e.measureText(this.myMax+" ").width,e.fillText(this.myMax,t.width-s*(1-.8)-a-10,h),a=e.measureText(this.myCurrentValue).width,e.fillText(this.myCurrentValue,t.width/2-a/2,h+14),this.myCurrentValue=window[this.getAttribute("watch")];var r=this.myCurrentValue/this.myMax*180;this.gauge_drawPieSlice(e,i,h,s,180+r,180+r+1,"black");var n=0,o=4,l=t.height/2-20,m=t.width-20;for(o=4;o<100;o++){if(e.font=o+"px Arial",n=e.measureText(this.myName).height,a=e.measureText(this.myName+" ").width,n>l){o--;break}if(a>m){o--;break}}e.font=o+"px Arial",a=e.measureText(this.myName).width,e.fillText(this.myName,t.width/2-a/2,h+h/2)}}customElements.define("needle-gauge",class_Gauge);